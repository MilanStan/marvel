!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";var n,o=a(1);((n=o)&&n.__esModule?n:{default:n}).default.Init()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=a(2),r=(n=o)&&n.__esModule?n:{default:n};var s,i,l,c,u,d,m,f,p,g=(s=r.default,i={title:"title-container",search:"search-input",mainContainer:"main-container",mainWrapper:"main-wrapper",itemWrapper:"item-wrapper",bookmark:"bookmark"},l=function(e,t){var a="";e.forEach(function(e){a+=c(e)}),console.log("Izvr≈°eno print items"),document.getElementsByClassName(i.mainWrapper)[0].innerHTML=a,document.getElementsByClassName(i.mainWrapper)[0].classList.contains("shown")||document.getElementsByClassName(i.mainWrapper)[0].classList.add("shown"),d(e.length,t)},c=function(e){return'<div class="item-wrapper">\n            <div class="image-wrapper" style=\''+u(e.thumbnail)+'\'></div>\n            <div class="name">'+e.name+'</div>\n            <div class="bookmark" data-id="'+e.id+'" data-name="'+e.name+'" data-path="'+e.thumbnail.path+'" data-extension="'+e.thumbnail.extension+'" data-isbook="'+(e.isBookmarked?"true":"false")+'">\n                '+(e.isBookmarked?'<span class="glyphicon glyphicon-star" aria-hidden="true" title="Remove from bookmarks">':'<span class="glyphicon glyphicon-star-empty" aria-hidden="true" title="Add to bookmarks">')+"\n                </span>\n            </div>\n        </div>"},u=function(e){return'\n        background-image:url("'+e.path+"/detail."+e.extension+'");\n        '},d=function(e,t){console.log("Naslov"+e,t);var a=document.getElementsByClassName(i.title)[0],n="";if("saved"==t&&e>0&&(n="Your bookmarks"),"saved"==t&&0==e&&(n="There aren't your bookmarks"),"error"==t&&0==e&&(n="Database error occurred!"),"loaded"==t){var o=document.getElementsByClassName(i.search)[0].value;n=0==e?"No items start with '"+o+"'":"Items which start with '"+o+"'"}a.innerHTML=n},m=function(){window.addEventListener("load",function(){s.loadSavedCharacter(l)}),document.getElementsByClassName(i.search)[0].focus()},f=function(){document.addEventListener("click",function(e){if(e.target&&e.target.parentNode.classList.contains(i.bookmark)){var t=e.target.parentNode,a=parseInt(t.getAttribute("data-id"));if("true"===t.getAttribute("data-isbook"))s.removeSavedCharacter(a),t.setAttribute("data-isbook","false"),t.innerHTML='<span class="glyphicon glyphicon-star-empty" aria-hidden="true" title="Add to bookmarks">';else{var n=t.getAttribute("data-name"),o={path:t.getAttribute("data-path"),extension:t.getAttribute("data-extension")};s.makeSavedCharacter(a,n,o,!0),t.setAttribute("data-isbook","true"),t.innerHTML='<span class="glyphicon glyphicon-star" aria-hidden="true" title="Remove from bookmarks">'}}})},p=function(){var e,t=document.getElementsByClassName(i.search)[0];t.addEventListener("input",function(){void 0!==e&&clearTimeout(e),e=setTimeout(function(){var e=t.value;console.log(e),e?s.loadAjax(e,l):l(s.getSavedItems,"saved")},1e3)}),t.addEventListener("input",function(){document.getElementsByClassName(i.mainWrapper)[0].classList.contains("shown")&&document.getElementsByClassName(i.mainWrapper)[0].classList.remove("shown")})},{Init:function(){f(),p(),m()}});t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,r,s,i,l,c=(r=null,i={count:0,limit:20,offset:0,total:0,page:1},l=function e(t,a,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.name=a,this.thumbnail=n,this.isBookmarked=o},{urlData:s={baseUrl:"https://gateway.marvel.com:443/v1/public/",subject:"characters?",nameStartText:"nameStartsWith=",prefix:"",limit:12,offset:0,apikey:"apikey=9cc6908bc626709046be238c2c177a07"},loadAjax:function(e,t){n=[],r&&(r.abort(),r=null),r=new XMLHttpRequest;var a,c,u=(a=e,s.prefix=a+"&",c=""+s.baseUrl+s.subject+s.nameStartText+s.prefix+"limit="+s.limit+"&offset="+s.offset+"&"+s.apikey,console.log(c),c);r.onreadystatechange=function(){if(r.readyState==XMLHttpRequest.DONE)if(200==r.status){var e=JSON.parse(r.responseText);console.log(e);var a=e.data,s=a.count,c=a.limit,u=a.offset,d=a.results,m=a.total;i.count=s,i.limit=c,i.offset=u,i.total=m,d.forEach(function(e){var t=e.id,a=e.name,o=e.thumbnail;n.push(new l(t,a,o))}),function(e){if(o.length>0)for(var t=0;t<o.length;t++)for(var a=0;a<e.length;a++)if(o[t].id===e[a].id){e[a].isBookmarked=!0;break}}(n),t(n,"loaded")}else r.status>=400&&(t(n,"error"),console.log("There was an error."))},r.open("GET",u,!0),r.send()},loadSavedCharacter:function(e){"undefined"!=typeof Storage&&localStorage.marvel?(console.log(localStorage.getItem("marvel")),JSON.parse(localStorage.getItem("marvel")).forEach(function(e){var t=e.id,a=e.name,n=e.thumbnail,r=e.isBookmarked;o.push(new l(t,a,n,r))}),console.log("Snimljeni objekti:"),console.log(o)):console.log("there aren't saved characters"),e(o,"saved")},makeSavedCharacter:function(e,t,a,n){o.push(new l(e,t,a,n)),"undefined"!=typeof Storage?localStorage.setItem("marvel",JSON.stringify(o)):message="No web storage support!"},removeSavedCharacter:function(e){parseInt(e),console.log("unutar funkcije:"),console.log(o.length);var t=-1;0!==o.length?(console.log("ima clanova"),t=o.findIndex(function(t){return console.log(t.id),console.log(e),t.id===e}),console.log("indexPos "+t),-1!==t&&(o.splice(t,1),localStorage.setItem("marvel",JSON.stringify(o)),console.log("obrisan clan niza"),0===o.length&&localStorage.removeItem("marvel"))):console.log("nema clanova")},getLoadedItems:n=[],getSavedItems:o=[]});t.default=c}]);