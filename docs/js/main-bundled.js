!function(e){var t={};function a(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";var n,s=a(1);((n=s)&&n.__esModule?n:{default:n}).default.Init()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=a(2),o=(n=s)&&n.__esModule?n:{default:n};var r,i,l,c,d,u,m,f,v,g,p,h,b,y,k,N,w=(r=o.default,i="title-container",l="search-input",c="main-wrapper",d="bookmark",u="prev",m="next",f=function(e,t,a,n){var s="";e.forEach(function(e){s+=v(e)}),console.log("Izvr≈°eno print items"),document.getElementsByClassName(c)[0].innerHTML=s,document.getElementsByClassName(c)[0].classList.contains("shown")||document.getElementsByClassName(c)[0].classList.add("shown"),p(e.length,t),a?document.getElementsByClassName(u)[0].classList.add("active"):document.getElementsByClassName(u)[0].classList.contains("active")&&document.getElementsByClassName(u)[0].classList.remove("active"),n?document.getElementsByClassName(m)[0].classList.add("active"):document.getElementsByClassName(m)[0].classList.contains("active")&&document.getElementsByClassName(m)[0].classList.remove("active"),console.log(a),console.log(n)},v=function(e){return'<div class="item-wrapper">\n            <div class="image-wrapper" style=\''+g(e.thumbnail)+'\'></div>\n            <div class="name">'+e.name+'</div>\n            <div class="bookmark" data-id="'+e.id+'" data-name="'+e.name+'" data-path="'+e.thumbnail.path+'" data-extension="'+e.thumbnail.extension+'" data-isbook="'+(e.isBookmarked?"true":"false")+'">\n                '+(e.isBookmarked?'<span class="glyphicon glyphicon-star" aria-hidden="true" title="Remove from bookmarks">':'<span class="glyphicon glyphicon-star-empty" aria-hidden="true" title="Add to bookmarks">')+"\n                </span>\n            </div>\n        </div>"},g=function(e){return'\n        background-image:url("'+e.path+"/detail."+e.extension+'");\n        '},p=function(e,t){console.log("Naslov"+e,t);var a=document.getElementsByClassName(i)[0],n="";if("saved"==t&&e>0&&(n="Your bookmarks"),"saved"==t&&0==e&&(n="No bookmarks!"),"error"==t&&0==e&&(n="Database error occurred!"),"loaded"==t){var s=document.getElementsByClassName(l)[0].value;n=0==e?"No items start with '"+s+"'":"Items start with '"+s+"'"}a.innerHTML=n},h=function(){document.getElementsByClassName(c)[0].classList.contains("shown")&&document.getElementsByClassName(c)[0].classList.remove("shown")},b=function(){window.addEventListener("load",function(){r.loadSavedCharacter(f)}),document.getElementsByClassName(l)[0].focus()},y=function(){document.addEventListener("click",function(e){if(e.target&&e.target.parentNode.classList.contains(d)){var t=e.target.parentNode,a=parseInt(t.getAttribute("data-id"));if("true"===t.getAttribute("data-isbook"))r.removeSavedCharacter(a),t.setAttribute("data-isbook","false"),t.innerHTML='<span class="glyphicon glyphicon-star-empty" aria-hidden="true" title="Add to bookmarks">';else{var n=t.getAttribute("data-name"),s={path:t.getAttribute("data-path"),extension:t.getAttribute("data-extension")};r.makeSavedCharacter(a,n,s,!0),t.setAttribute("data-isbook","true"),t.innerHTML='<span class="glyphicon glyphicon-star" aria-hidden="true" title="Remove from bookmarks">'}}})},k=function(){var e,t=document.getElementsByClassName(l)[0];t.addEventListener("input",function(){void 0!==e&&clearTimeout(e),e=setTimeout(function(){var e=t.value;console.log(e),e?(r.resetUrlData(),r.loadAjax(e,f)):f(r.getSavedItems,"saved",0,0)},1e3)}),t.addEventListener("input",h)},N=function(){document.addEventListener("click",function(e){if(e.target&&e.target.parentNode&&e.target.parentNode.classList.contains("pagination")){console.log("Paginacija");var t;t=e.target.parentNode.getAttribute("data-direction"),console.log(t),h(),r.changePage(t,f)}})},{Init:function(){y(),k(),b(),N()}});t.default=w},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s,o,r,i,l,c,d,u=(o=null,i={count:0,limit:20,offset:0,total:0,showNext:0,showPrev:0},l=null,c=function e(t,a,n,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.name=a,this.thumbnail=n,this.isBookmarked=s},d=function(e,t){n=[],o&&(o.abort(),o=null),o=new XMLHttpRequest;var a=function(e){r.prefix=""+e;var t;return t=""+r.baseUrl+r.subject+r.nameStartText+r.prefix+"&limit="+r.limit+"&offset="+r.offset+"&"+r.apikey,console.log(t),t}(e);o.onreadystatechange=function(){if(o.readyState==XMLHttpRequest.DONE)if(200==o.status){var e=JSON.parse(o.responseText).data,a=e.results,d=e.total;i.total=d,a.forEach(function(e){var t=e.id,a=e.name,s=e.thumbnail;n.push(new c(t,a,s))}),function(e){if(s.length>0)for(var t=0;t<s.length;t++)for(var a=0;a<e.length;a++)if(s[t].id===e[a].id){e[a].isBookmarked=!0;break}}(n),i.total>r.offset+r.limit?(null===l&&(l=Object.assign({},r)),i.showNext=1):i.showNext=0,r.offset>0?i.showPrev=1:i.showPrev=0,t(n,"loaded",i.showPrev,i.showNext)}else o.status>=400&&(t(n,"error"),console.log("There was an error."))},o.open("GET",a,!0),o.send()},{urlData:r={baseUrl:"https://gateway.marvel.com:443/v1/public/",subject:"characters?",nameStartText:"nameStartsWith=",prefix:"",limit:12,offset:0,apikey:"apikey=9cc6908bc626709046be238c2c177a07"},loadAjax:d,loadSavedCharacter:function(e){"undefined"!=typeof Storage&&localStorage.marvel?JSON.parse(localStorage.getItem("marvel")).forEach(function(e){var t=e.id,a=e.name,n=e.thumbnail,o=e.isBookmarked;s.push(new c(t,a,n,o))}):console.log("there aren't saved characters"),e(s,"saved",0,0)},makeSavedCharacter:function(e,t,a,n){s.push(new c(e,t,a,n)),"undefined"!=typeof Storage?localStorage.setItem("marvel",JSON.stringify(s)):message="No web storage support!"},removeSavedCharacter:function(e){parseInt(e);var t=-1;0!==s.length&&-1!==(t=s.findIndex(function(t){return t.id===e}))&&(s.splice(t,1),localStorage.setItem("marvel",JSON.stringify(s)),0===s.length&&localStorage.removeItem("marvel"))},getLoadedItems:n=[],getSavedItems:s=[],changePage:function(e,t){"next"===e?r.offset+=r.limit:"prev"===e&&(r.offset-=r.limit),d(r.prefix,t)},resetUrlData:function(){null!==l&&(r=Object.assign({},l),l=null)}});t.default=u}]);